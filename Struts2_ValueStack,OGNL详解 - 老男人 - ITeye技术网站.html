<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" dir="ltr"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Struts2_ValueStack,OGNL详解 - 老男人 - ITeye技术网站</title>
    <meta name="description" content="引言： 闲话不多说，最近项目结束，天天泡在CSDN论坛上，不乏看到一些好的文章，在此与君共勉...  原文地址：http://blog.csdn.net/wyply115/article/details/8257140&nbsp;，有兴趣的朋友可以去他博客学习学习...  &nbsp;  一、ValueStack&nbsp;&nbsp;&nbsp; 1.ValueStack是一个接口，在struts2中使用OGNL（Object-Graph Nav ...">
    <meta name="keywords" content=" Struts2_ValueStack,OGNL详解">
    <link rel="shortcut icon" href="http://501565246-qq-com.iteye.com/images/favicon.ico" type="image/x-icon">
    <link rel="search" type="application/opensearchdescription+xml" href="http://501565246-qq-com.iteye.com/open_search.xml" title="ITeye">
    <link href="http://501565246-qq-com.iteye.com/rss" rel="alternate" title="老男人" type="application/rss+xml">
    <link href="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/blog.css" media="screen" rel="stylesheet" type="text/css">
<link href="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/black.css" media="screen" rel="stylesheet" type="text/css">
    <script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/ga.js" async="" type="text/javascript"></script><script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/application.js" type="text/javascript"></script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535605-1']);
  _gaq.push(['_setDomainName', 'iteye.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


      <link href="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/SyntaxHighlighter.css" media="screen" rel="stylesheet" type="text/css">
  <script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/shCoreCommon.js" type="text/javascript"></script>
<script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/hotkey.js" type="text/javascript"></script>
  <script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/code_favorites.js" type="text/javascript"></script>
<script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/weiboshare.js" type="text/javascript"></script>
  <script>try {  for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){    var lastpass_f = document.forms[lastpass_iter];    if(typeof(lastpass_f.lpsubmitorig)=="undefined"){      if (typeof(lastpass_f.submit) == "function") {        lastpass_f.lpsubmitorig = lastpass_f.submit;        lastpass_f.submit = function(){          var form = this;          try {            if (document.documentElement && 'createEvent' in document)            {              var forms = document.getElementsByTagName('form');              for (var i=0 ; i<forms.length ; ++i)                if (forms[i]==form)                {                  var element = document.createElement('lpformsubmitdataelement');                  element.setAttribute('formnum',i);                  element.setAttribute('from','submithook');                  document.documentElement.appendChild(element);                  var evt = document.createEvent('Events');                  evt.initEvent('lpformsubmit',true,false);                  element.dispatchEvent(evt);                  break;                }            }          } catch (e) {}          try {            form.lpsubmitorig();          } catch (e) {}        }      }    }  }} catch (e) {}</script></head>
  <body>
    <div id="header">
      <div id="blog_site_nav">
  <a href="http://www.iteye.com/" class="homepage">首页</a>
  <a href="http://www.iteye.com/news">资讯</a>
  <a href="http://www.iteye.com/magazines">精华</a>
  <a href="http://www.iteye.com/forums">论坛</a>
  <a href="http://www.iteye.com/ask">问答</a>
  <a href="http://www.iteye.com/blogs">博客</a>
  <a href="http://www.iteye.com/blogs/subjects">专栏</a>
  <a href="http://www.iteye.com/groups">群组</a>
  <a href="#" onclick="return false;" id="msna"><u>更多</u> <small>▼</small></a>
  <div class="quick_menu" style="display:none;">
    <a target="_blank" href="http://job.iteye.com/iteye">招聘</a>
    <a href="http://www.iteye.com/search">搜索</a>
  </div>
</div>

      <div id="user_nav">
      <a href="http://501565246-qq-com.iteye.com/login" class="welcome" title="登录">您还未登录 !</a>
    <a href="http://501565246-qq-com.iteye.com/login">登录</a>
    <a href="http://501565246-qq-com.iteye.com/signup" class="nobg">注册</a>
  </div>

    </div>

    <div id="page">
      <div id="branding" class="clearfix">
        <div id="blog_name">
          <h1><a href="http://501565246-qq-com.iteye.com/">老男人</a></h1>
        </div>
        <div id="fd"></div>
        <div id="blog_navbar">
          <ul>
            <li class="blog_navbar_for"><a href="http://501565246-qq-com.iteye.com/"><strong>博客</strong></a></li>
            <li><a href="http://501565246-qq-com.iteye.com/weibo">微博</a></li>
            <li><a href="http://501565246-qq-com.iteye.com/album">相册</a></li>
            <li><a href="http://501565246-qq-com.iteye.com/link">收藏</a></li>
            <li><a href="http://501565246-qq-com.iteye.com/blog/guest_book">留言</a></li>
            <li><a href="http://501565246-qq-com.iteye.com/blog/profile">关于我</a></li>
          </ul>
    
          <div class="search">
            <form action="/blog/search" method="get">
              <input class="search_text" id="query" name="query" style="margin-left: 10px;width: 110px;" type="text">
              <input class="submit_search" value="" type="submit">
            </form>
          </div> 
          <div id="fd"></div>         
        </div>
      </div>
      
      <div id="content" class="clearfix">
        <div id="main">
          



          


<div class="h-entry" style="display:none">
  <a href="http://501565246-qq-com.iteye.com/" class="p-author" target="_blank">韩悠悠</a>
</div>


<div class="blog_main">
  <div class="blog_title">
    <h3>
      <a href="http://501565246-qq-com.iteye.com/blog/1748513">Struts2_ValueStack,OGNL详解</a>
      <em class="actions">      </em>
    </h3>
    <ul class="blog_categories"><strong>博客分类：</strong> <li><a href="http://501565246-qq-com.iteye.com/category/116630">struts2</a></li> </ul>
        <div class="news_tag">&nbsp;</div>
  </div>

  <div id="blog_content" class="blog_content">
    <p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">引言：</span><span style=""> </span><span style="">闲话不多说，最近项目结束，天天泡在</span><span style="">CSDN</span><span style="">论坛上，不乏看到一些好的文章，在此与君共勉</span><span style="">...</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">原文地址：</span><span><a href="http://blog.csdn.net/wyply115/article/details/8257140"><span style="">http://blog.csdn.net/wyply115/article/details/8257140</span></a></span><span style="">&nbsp;</span><span style="">，有兴趣的朋友可以去他博客学习学习</span><span style="">...</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="font-size: small;">&nbsp;</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><strong><span style="">一、</span></strong><strong><span style="">ValueStack</span></strong></span><strong><span style=""><br></span></strong><span style="font-size: small;"><strong><span style="">&nbsp;&nbsp;&nbsp; 1</span></strong><span style="">.ValueStack</span><span style="">是一个接口，在</span><span style="">struts2</span><span style="">中使用</span><span style="">OGNL</span><span style="">（</span><span style="">Object-Graph Navigation Language</span><span style="">）表达式实际上是使用</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">实现了</span><span style="">ValueStack</span><span style="">接口的类</span><span style="">OgnlValueStack.</span><span style="">它是</span><span style="">ValueStack</span><span style="">的默认实现类</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp; </span><strong><span style="">2</span></strong><span style="">.ValueStack</span><span style="">贯穿整个</span><span style="">action</span><span style="">的生命周期，每一个</span><span style="">action</span><span style="">实例都拥有一个</span><span style="">ValueStack</span><span style="">对象，其中保存了当前</span><span style="">action</span><span style="">对象和其他相关对象</span><span style="">.</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp;&nbsp; </span><strong><span style="">3</span></strong><span style="">.struts2</span><span style="">把</span><span style="">ValueStack</span><span style="">对象保存在名为：</span><span style="">struts.valueStack</span><span style="">的</span><span style="">request</span><span style="">域中</span><span style="">.</span><span style="">即</span><span style="">ValueStack</span><span style="">作用域为</span><span style="">request.</span><span style="">当</span><span style="">action</span><span style="">创建的时候，</span><span style="">ValueStack</span><span style="">就创建了，</span><span style="">action</span><span style="">被销毁的时候，</span><span style="">ValueStack</span><span style="">就销毁了</span><span style=""></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp;&nbsp; </span><strong><span style="">4</span></strong><span style="">.ValueStack</span><span style="">中的数据分两部分存放：</span><span style="">root</span><span style="">（栈结构，</span><span style="">CompoundRoot</span><span style="">）和</span><span style="">context</span><span style="">（</span><span style="">map</span><span style="">形式</span><span style="">,OgnlContext</span><span style="">）</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">（</span><span style="">1</span><span style="">）</span><span style="">&nbsp;&nbsp;&nbsp; * </span><span style="">其中的</span><span style="">root</span><span style="">对象是</span><span style="">CompoundRoot</span><span style="">，</span><span style="">CompoundRoot</span><span style="">继承了</span><span style="">ArrayList</span><span style="">，提供了额外的方法：</span><span style="">push(),</span><span style="">和</span><span style="">pop()</span><span style="">方法，</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">用来对</span><span style="">root</span><span style="">对象中所包含的数据进行存取</span><span style="">.</span><span style="">正是由于这两个方法，</span><span style="">CompoundRoot</span><span style="">变成了一个栈结构</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * struts2</span><span style="">中，一个请求在最终到达</span><span style="">Action</span><span style="">的方法之前，</span><span style="">Action</span><span style="">对象本身会被压入</span><span style="">ValueStack</span><span style="">（实际上就是放到</span></span><span style="font-size: small;"><span style="">ValueStack<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">的</span><span style="">CompoundRoot</span><span style="">中），所以</span><span style="">action</span><span style="">对象是</span><span style="">CompoundRoot</span><span style="">中的一个元素</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">（</span><span style="">2</span><span style="">）</span><span style="">* </span><span style="">其中的</span><span style="">context</span><span style="">对象是</span><span style="">OgnlContext</span><span style="">，它实现了</span><span style="">map</span><span style="">接口，在</span><span style="">valuestack</span><span style="">的默认实现类中，即</span><span style="">OgnlValueStack</span><span style="">类中，</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">调用</span><span style="">ongl</span><span style="">中的方法：</span><span style="">Ognl.createDefaultContext(..)</span><span style="">给</span><span style="">context</span><span style="">赋值，查看源代码可知，</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">此方法返回的是一个</span><span style="">OgnlContext</span><span style="">对象</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp; </span><strong><span style="">5</span></strong><span style="">.</span><span style="">获取</span><span style="">ValueStack</span><span style="">的三种方式</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">（</span><span style="">1</span><span style="">）</span></span><span style="font-size: small;"><span style="">ValueStack valueStack = ActionContext.getContext().getValueStack();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ActionContext</span><span style="">为</span><span style="">Action</span><span style="">的上下文，其中有重要的</span><span style="">6</span><span style="">大对象</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 * valueStack,parameters,request,session,application,attr<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span></span><span style="font-size: small;"><span style="">而</span><span style="">ognl</span><span style="">表达式必须选择</span><span style="">AcitonContext</span><span style="">中的一个对象作为根对象（</span><span style="">root</span><span style="">），默认为</span><span style="">valueStack</span><span style="">，因此访问</span><span style="">valueStack</span><span style="">中的数据不加</span></span><span style="font-size: small;"><span style="">#<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </span><span style="">而如果要使用另外</span><span style="">5</span><span style="">个对象作为根对象，需要加</span><span style="">#</span><span style="">前缀</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">（</span><span style="">2</span><span style="">）</span></span><span style="font-size: small;"><span style="">ValueStack
 valueStack = 
ServletActionContext.getValueStack(ServletActionContext.getRequest());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServletActionContext</span><span style="">继承了</span><span style="">ActionContext</span><span style="">，它与</span><span style="">web</span><span style="">容器耦合，可以获取</span><span style="">web</span><span style="">容器的一些信息</span><span style="">.</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">（</span><span style="">3</span><span style="">）</span><span style="">ValueStack valueStack = (ValueStack) ServletActionContext.getRequest().getAttribute("struts.valueStack");</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp;&nbsp; </span><strong><span style="">6</span></strong><span style="">.ValueStack</span><span style="">内存结构图</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style=""><br><img class="magplus" title="点击查看原始大小图片" alt="" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/d8f20c65-1665-3f67-a906-ce5756a87899.png" height="508" width="700"><br>&nbsp;</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style=""></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""></span><span style=""></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp;&nbsp; </span><strong><span style="">7</span></strong><span style="">.</span><span style="">常用的存储数据的方法</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">（</span><span style="">1</span><span style="">）向</span><span style="">map</span><span style="">栈中存数据，即</span><span style="">ValueStack</span><span style="">中的</span><span style="">context</span><span style="">（</span><span style="">OgnlContext</span><span style="">）</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span></span><span style="font-size: small;"><span style="">通过</span><span style="">request</span><span style="">，</span><span style="">session</span><span style="">等向</span><span style="">map</span><span style="">中存储数据</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ServletActionContext.getRequest().setAttribute("username","joey");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ServletActionContext.getSession().put("pwd","123");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span></span><span style="font-size: small;"><span style="">直接向</span><span style="">map</span><span style="">栈中放数据</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ActionContext.getContext().put("msg","how you 
doing");&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">（</span><span style="">2</span><span style="">）向对象栈中存数据，即</span><span style="">ValueStack</span><span style="">中的</span><span style="">root</span><span style="">（</span><span style="">CompoundRoot</span><span style="">）对象</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span></span><span style="font-size: small;"><span style="">先得到</span><span style="">root</span><span style="">，再把数据压入到</span><span style="">root</span><span style="">中，这中方式是放入到栈底</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ValueStack valueStack = ActionContext.getContext().getValueStack();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 valueStack.getRoot().add(new Person());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span><span style="">先得到</span><span style="">root</span><span style="">，利用</span><span style="">add(index,Object)</span><span style="">把一个对象压入到</span><span style="">root</span><span style="">中指定位置</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ValueStack valueStack = ActionContext.getContext().getValueStack();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valueStack.getRoot().add(0</span><span style="">，</span><span style="">new Person());//</span><span style="">这里</span><span style="">0</span><span style="">，表示压入栈顶</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span><span style="">存放一个</span><span style="">map</span><span style="">到对象栈中</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ValueStack valueStack = ActionContext.getContext().getValueStack();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valueStack.set("msg","dude"); //</span></span><span style="font-size: small;"><span style="">先封装成</span><span style="">Map</span><span style="">，在把</span><span style="">Map</span><span style="">放入到对象栈中，且放入栈顶</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span><span style="">利用</span><span style="">valueStack</span><span style="">的</span><span style="">push</span><span style="">方法把一个对象直接压入栈顶</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ValueStack valueStack = ActionContext.getContext().getValueStack();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valueStack.push(new Person());</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><span style="">&nbsp;&nbsp; </span><strong><span style="">8</span></strong><span style="">.</span><span style="">利用</span><span style="">OGNL</span><span style="">表达式取</span><span style="">ValueStack</span><span style="">中的数据</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">（</span><span style="">1</span><span style="">）</span><span style="">&lt;s:property /&gt;</span><span style="">：取栈顶的元素</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">（</span><span style="">2</span><span style="">）</span><span style="">&lt;s:iterator /&gt;</span><span style="">：取栈顶的元素</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">注意：此标签的</span><span style="">value</span><span style="">属性值无论来自对象栈还是</span><span style="">Map</span><span style="">栈，都可以不加</span><span style="">#</span><span style="">前缀（</span><span style="">&lt;s:select/&gt;</span><span style="">标签也适用）</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">因为此标签在迭代的时候，总是把当前正在迭代的元素放入到栈顶</span><span style="">.</span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style="font-size: small;"><strong><span style="">二、</span></strong><strong><span style="">ognl</span></strong></span><strong><span style=""><br></span></strong><span style="font-size: small;"><strong><span style="">&nbsp;&nbsp;&nbsp; 1</span></strong><span style="">.ognl</span><span style="">是</span><span style="">struts2</span><span style="">中使用的一种表达式语言，可用于</span><span style="">jsp</span><span style="">的标签库中，以方便访问各种对象的属性</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">它用于把界面的参数传递到</span><span style="">Action</span><span style="">中（并进行类型转换），它还可以用于</span><span style="">struts2</span><span style="">的配置文件中</span></span><span style="font-size: small;"><span style="">.<br>&nbsp; </span><strong><span style="">&nbsp; 2</span></strong><span style="">.Root</span><span style="">对象</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OGNL</span></span><span style="font-size: small;"><span style="">称为对象图导航语言，所谓对象图，即以任意一个对象为根，通过</span><span style="">OGNL</span><span style="">可以访问与这个对象关联的其它对象</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">例如：</span><span style=""></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: #333333;"><strong><span style="">[java]</span></strong><span style=""> </span><span><a title="view plain" href="http://blog.csdn.net/wyply115/article/details/8257140"><span style="">view plain</span></a><a title="copy" href="http://blog.csdn.net/wyply115/article/details/8257140"><span style="">copy</span></a><a title="print" href="http://blog.csdn.net/wyply115/article/details/8257140"><span style="">print</span></a><a title="?" href="http://blog.csdn.net/wyply115/article/details/8257140"><span style="">?</span></a></span><span style=""></span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">1.<span style="">&nbsp; </span></span></span><span style="">public</span><span style=""> </span><span style="">class</span><span style=""> User{&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">2.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">private</span><span style=""> String username;&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">3.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">private</span><span style=""> Group group;&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">4.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style="">&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">5.<span style="">&nbsp; </span></span></span><span style="">}&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">6.<span style="">&nbsp; </span></span></span><span style="">public</span><span style=""> </span><span style="">class</span><span style=""> Group{&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">7.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">private</span><span style=""> String name;&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">8.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">private</span><span style=""> Organization org;&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">9.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style="">&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">10.<span style=""> </span></span></span><span style="">}&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">11.<span style=""> </span></span></span><span style="">public</span><span style=""> </span><span style="">class</span><span style=""> Organization{&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">12.<span style=""> </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">private</span><span style=""> String orgId;&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">13.<span style=""> </span></span></span><span style="">&nbsp;&nbsp;&nbsp; </span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style="">&nbsp; </span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">14.<span style=""> </span></span></span><span style="">}&nbsp; </span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: #333333;"><strong><span style="">[java]</span></strong><span style=""> </span><span><a title="view plain" href="http://blog.csdn.net/java_xiaofengfeng/article/details/8259234"><span style="">view plain</span></a><a title="copy" href="http://blog.csdn.net/java_xiaofengfeng/article/details/8259234"><span style="">copy</span></a><a title="print" href="http://blog.csdn.net/java_xiaofengfeng/article/details/8259234"><span style="">print</span></a><a title="?" href="http://blog.csdn.net/java_xiaofengfeng/article/details/8259234"><span style="">?</span></a></span><span style=""></span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">1.<span style="">&nbsp; </span></span></span><span style="">public</span><span style="">&nbsp;</span><span style="">class</span><span style="">&nbsp;User{&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">2.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">private</span><span style="">&nbsp;String&nbsp;username;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">3.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">private</span><span style="">&nbsp;Group&nbsp;group;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">4.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style=""> </span><span style="">&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">5.<span style="">&nbsp; </span></span></span><span style="">}&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">6.<span style="">&nbsp; </span></span></span><span style="">public</span><span style="">&nbsp;</span><span style="">class</span><span style="">&nbsp;Group{&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">7.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">private</span><span style="">&nbsp;String&nbsp;name;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">8.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">private</span><span style="">&nbsp;Organization&nbsp;org;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">9.<span style="">&nbsp; </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style=""> </span><span style="">&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">10.<span style=""> </span></span></span><span style="">}&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">11.<span style=""> </span></span></span><span style="">public</span><span style="">&nbsp;</span><span style="">class</span><span style="">&nbsp;Organization{&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">12.<span style=""> </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">private</span><span style="">&nbsp;String&nbsp;orgId;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">13.<span style=""> </span></span></span><span style="">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="">//</span><span style="">省略</span><span style="">setter</span><span style="">，</span><span style="">getter</span><span style="">方法</span><span style=""> </span><span style="">&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style=""><span style="font-family: Consolas; font-size: 9pt;"><span style="">14.<span style=""> </span></span></span><span style="">}&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>public class User{</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>private String username;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>private Group group;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>//</span><span style="">省略<span>setter</span>，<span>getter</span>方法<span></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>}</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>public class Group{</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>private String name;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>private Organization org;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>//</span><span style="">省略<span>setter</span>，<span>getter</span>方法<span></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>}</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>public class Organization{</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>private String orgId;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp;&nbsp; </span>//</span><span style="">省略<span>setter</span>，<span>getter</span>方法<span></span></span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><span style="">&nbsp; </span>}</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 19.5pt; margin: 0cm 0cm 0pt; background: white;"><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">以上三个类，描述了通过一个</span><span style="">User</span><span style="">对象，同过</span><span style="">User</span><span style="">对象可以导航到</span><span style="">Group</span><span style="">对象，进而导航到</span><span style="">Organization</span><span style="">对象</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">以</span><span style="">User</span><span style="">为根，通过基本的</span><span style="">getters</span><span style="">方法</span><span style="">,</span><span style="">可以访问到此根对象的其它关联对象</span><span style="">.</span><span style="">【对象图的导航，必须通过</span><span style="">getters</span><span style="">方法导航】</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">注意</span><span style="">:&nbsp;&nbsp;&nbsp; * </span><span style="">导航的目的，就是为了获取某个对象的值或设置某个对象的值或调用某个对象的方法</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * OGNL</span><span style="">表达式语言的真正目的，是为了在那些不能写</span><span style="">java</span><span style="">代码的地方执行</span><span style="">java</span><span style="">代码，或者是为了更方便的执行</span><span style="">java</span><span style="">代码</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp; </span><strong><span style="">3</span></strong><span style="">.Context</span><span style="">对象</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span></span><span style="font-size: small;"><span style="">在</span><span style="">OGNL</span><span style="">表达式中，有可能需要访问到多个毫不相干的对象，这时候，我们需要给</span><span style="">OGNL</span><span style="">传递一个</span><span style="">Map</span><span style="">类型的对象，把表达式中需要用到的对象放到</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Map</span></span><span style="font-size: small;"><span style="">中即可</span><span style="">.</span><span style="">而这个</span><span style="">Map</span><span style="">对象称为</span></span><span style="font-size: small;"><span style="">Context<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span><span style="">要在表达式访问到</span><span style="">context</span><span style="">中的对象，需要使用</span><span style="">"#</span><span style="">对象名称</span><span style="">"</span><span style="">的语法规则</span></span><span style="font-size: small;"><span style="">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </span><span style="">存在</span><span style="">context</span><span style="">的主要原因就是在</span><span style="">OGNL</span><span style="">中，不支持多个</span><span style="">root</span><span style="">对象，而如果需要在表达式中访问多个毫不相关的对象时，</span></span><span style=""><br><span style="font-size: small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: small;"><span style="">只能通过一个</span><span style="">Map</span><span style="">来把这些对象统一传递给</span><span style="">OGNL.</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span><span style="font-family: Calibri; font-size: small;">&nbsp;</span></span></p>
  </div>

  
  <div class="attachments">
    
      
        <ul style="display:none;">
          <li><a href="http://dl2.iteye.com/upload/attachment/0077/9720/d8f20c65-1665-3f67-a906-ce5756a87899.png" target="_blank"><img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/d8f20c65-1665-3f67-a906-ce5756a87899-thumb.png" class="magplus" title="点击查看原始大小图片"></a></li>
          
          <li>大小: 100.4 KB</li>
        </ul>
      
    
    
      <ul>
        <li><a href="#" onclick="$$('div.attachments ul').invoke('show');$(this).up(1).hide();return false;">查看图片附件</a></li>
      </ul>
    
  </div>


  
  
  <iframe class="nyxzvyhkbtdmbmwblymc" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/794.html" scrolling="no" frameborder="0" height="60" width="468"></iframe>
  
  <div id="bottoms" class="clearfix">
    
    <div id="share_weibo">分享到：
      <a data-type="sina" href="javascript:;" title="分享到新浪微博"><img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/sina.jpg"></a>
      <a data-type="qq" href="javascript:;" title="分享到腾讯微博"><img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/tec.jpg"></a>
    </div>
  </div>

  <div class="blog_nav">
    <div class="pre_next">
      <a href="http://501565246-qq-com.iteye.com/blog/1748626" class="next" title="struts源码之七">struts源码之七</a>
      |
      <a href="http://501565246-qq-com.iteye.com/blog/1748508" class="pre" title="struts源码之六">struts源码之六</a>
    </div>
  </div>
  <div class="blog_bottom">
    <ul>
      <li>2012-12-15 22:24</li>
      <li>浏览 3327</li>
      <li><a href="#comments">评论(0)</a></li>
      
      
      <li>分类:<a href="http://www.iteye.com/blogs/category/web">Web前端</a></li>      
      <li class="last"><a href="http://www.iteye.com/wiki/blog/1748513" target="_blank" class="more">相关推荐</a></li>
    </ul>
  </div>

  <div class="blog_comment">
    <h5>评论</h5>
    <a id="comments" name="comments"></a>
    
    
    
  </div>

  <div class="blog_comment">
    <h5>发表评论</h5>
            <p style="text-align:center; margin-top:30px;margin-bottom:0px;"><a href="http://501565246-qq-com.iteye.com/login" style="background-color:white;"> <img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/login_icon.png" style="vertical-align:middle; margin-right: 10px;"></a><a href="http://501565246-qq-com.iteye.com/login">  您还没有登录,请您登录后再发表评论 </a></p>
      </div>
</div>


<script type="text/javascript">
  dp.SyntaxHighlighter.HighlightAll('code', true, true);

  $$('#main .blog_content pre[name=code]').each(function(pre, index){ // blog content
    var post_id = 1748513;
    var location = window.location;
    source_url = location.protocol + "//" + location.host + location.pathname + location.search;
    pre.writeAttribute('codeable_id', post_id);
    pre.writeAttribute('codeable_type', "Blog");
    pre.writeAttribute('source_url', source_url);
    pre.writeAttribute('pre_index', index);
    pre.writeAttribute('title', 'Struts2_ValueStack,OGNL详解');
  });

  fix_image_size($$('div.blog_content img'), 700);

  function processComment() {
    $$('#main .blog_comment > div').each(function(comment){// comment
      var post_id = comment.id.substr(2);
      $$("#"+comment.id+" pre[name=code]").each(function(pre, index){
        var location = window.location;
        source_url = location.protocol + "//" + location.host + location.pathname + location.search;
        source_url += "#" + comment.id;
        pre.writeAttribute('codeable_id', post_id);
        pre.writeAttribute('codeable_type', "BlogComment");
        pre.writeAttribute('source_url', source_url);
        pre.writeAttribute('pre_index', index);
        pre.writeAttribute('title', 'Struts2_ValueStack,OGNL详解');
      });
    });
  }

  function quote_comment(id) {
    new Ajax.Request('/editor/quote', {
      parameters: {'id':id, 'type':'BlogComment'},
      onSuccess:function(response){editor.bbcode_editor.textarea.insertAfterSelection(response.responseText);
        Element.scrollTo(editor.bbcode_editor.textarea.element);}
    });
  }

  code_favorites_init();
  processComment();
  new WeiboShare({share_buttons: $('share_weibo'), img_scope: $('blog_content')});
</script>




        </div>

        <div id="local">
          <div class="local_top"></div>
          <div id="blog_owner">
  <div id="blog_owner_logo"><a href="http://501565246-qq-com.iteye.com/"><img alt="韩悠悠的博客" class="logo" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/f91e45fd-cfac-3da3-82d0-fef8e070a8e2.jpg" title="韩悠悠的博客: 老男人" width=""></a></div>
  <div id="blog_owner_name">韩悠悠</div>
</div>

          <div id="blog_actions">
            <ul>
              <li>浏览: 229393 次</li>
              <li>性别: <img alt="Icon_minigender_1" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/icon_minigender_1.gif" title="男"></li>
              <li>来自: 深圳</li>
              <li><img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/offline.gif"></li>
              
            </ul>
          </div>
          <div id="user_visits" class="clearfix">
            <h5>最近访客 <span style="font-weight:normal;font-size:12px;padding-left:30px;"><a href="http://501565246-qq-com.iteye.com/blog/user_visits">更多访客&gt;&gt;</a></span></h5>
            
              <div class="user_visit">
                <div class="logo"><a href="http://mengnanthy.iteye.com/" target="_blank"><img alt="mengnanthy的博客" class="logo" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/user-logo-thumb.gif" title="mengnanthy的博客: " width="48px"></a></div>
                <div class="left"><a href="http://mengnanthy.iteye.com/" target="_blank" title="mengnanthy">mengnanthy</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://lswq-love-221.iteye.com/" target="_blank"><img alt="lswq_love_221的博客" class="logo" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/user-logo-thumb.gif" title="lswq_love_221的博客: " width="48px"></a></div>
                <div class="left"><a href="http://lswq-love-221.iteye.com/" target="_blank" title="lswq_love_221">lswq_love_221</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://lxmxrx.iteye.com/" target="_blank"><img alt="lxmxrx的博客" class="logo" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/user-logo-thumb.gif" title="lxmxrx的博客: " width="48px"></a></div>
                <div class="left"><a href="http://lxmxrx.iteye.com/" target="_blank" title="lxmxrx">lxmxrx</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://tq09mx5.iteye.com/" target="_blank"><img alt="tq09mx5的博客" class="logo" src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/user-logo-thumb.gif" title="tq09mx5的博客: " width="48px"></a></div>
                <div class="left"><a href="http://tq09mx5.iteye.com/" target="_blank" title="tq09mx5">tq09mx5</a></div>
              </div>
            
          </div>

          

                      <div id="blog_menu">
              <h5>文章分类</h5>
              <ul>
                <li><a href="http://501565246-qq-com.iteye.com/">全部博客 (384)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/121332">TortoiseSVN (5)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/116628">java (38)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/116629">web (24)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/116630">struts2 (16)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/116631">spring (27)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/121915">hibernate (14)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/121917">oracle (15)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/121931">thinking in java编程学习笔记 (14)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/124988">杂谈 (10)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/128351">Commons Collections (10)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/139692">extjs (18)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/178895">linux (34)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/201803">android (42)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/255077">tomcat (23)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/257333">架构师 (4)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/257981">cloud (11)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/276350">solr (37)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/276351">nutch (5)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/276352">luence (0)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/276353">mondrian (0)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/289589">hadoop (10)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/289709">hbase (10)</a></li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/category/298860">算法 (16)</a></li>
                
              </ul>
            </div>
            <div id="month_blogs">
              <h5>社区版块</h5>
              <ul>
                <li><a href="http://501565246-qq-com.iteye.com/blog/news">我的资讯</a> (0)</li>
                <li>
                  <a href="http://501565246-qq-com.iteye.com/blog/post">我的论坛</a> (67)
                </li>
                <li><a href="http://501565246-qq-com.iteye.com/blog/answered_problems">我的问答</a> (41)</li>
              </ul>
            </div>
            <div id="month_blogs">
              <h5>存档分类</h5>
              <ul>
                
                  <li><a href="http://501565246-qq-com.iteye.com/blog/monthblog/2014-09">2014-09</a> (1)</li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/blog/monthblog/2014-07">2014-07</a> (14)</li>
                
                  <li><a href="http://501565246-qq-com.iteye.com/blog/monthblog/2014-06">2014-06</a> (5)</li>
                
                <li><a href="http://501565246-qq-com.iteye.com/blog/monthblog_more">更多存档...</a></li>
              </ul>
            </div>
            
            

            <div id="guest_books">
              <h5>最新评论</h5>
              <ul>
                
                <li>
                  <a href="http://501565246-qq-com.iteye.com/" target="_blank" title="韩悠悠">韩悠悠</a>： 
                  welyss 写道问下lz，我solr一直没解决的一个高亮问题 ...<br>
                  <a href="http://501565246-qq-com.iteye.com/blog/1855675#bc2374658">solr高亮设置以及摘要</a>
                </li>
                
                <li>
                  <a href="http://bloodkilory.iteye.com/" target="_blank" title="bloodkilory">bloodkilory</a>： 
                  &nbsp;<br>
                  <a href="http://501565246-qq-com.iteye.com/blog/1991862#bc2374011">Spring AOP 的@Aspect (转) </a>
                </li>
                
                <li>
                  <a href="http://welyss.iteye.com/" target="_blank" title="welyss">welyss</a>： 
                  问下lz，我solr一直没解决的一个高亮问题，字段的类型是普通 ...<br>
                  <a href="http://501565246-qq-com.iteye.com/blog/1855675#bc2373522">solr高亮设置以及摘要</a>
                </li>
                
                <li>
                  <a href="http://201408194131.iteye.com/" target="_blank" title="SUNAJINGGUANCHI">SUNAJINGGUANCHI</a>： 
                  高亮得到的集合在返回到前台时自动就是红色显示的吗？还是需要再处 ...<br>
                  <a href="http://501565246-qq-com.iteye.com/blog/1855675#bc2360581">solr高亮设置以及摘要</a>
                </li>
                
                <li>
                  <a href="http://hickeyhao.iteye.com/" target="_blank" title="hickeyhao">hickeyhao</a>： 
                  hickeyhao 写道我也想看看，经理让我弄 死活不亮啊hi ...<br>
                  <a href="http://501565246-qq-com.iteye.com/blog/1855675#bc2354587">solr高亮设置以及摘要</a>
                </li>
                
              </ul>
            </div>

            <div class="local_bottom"></div>
          
        </div>
      </div>

      <div id="footer" class="clearfix">
        <div id="copyright">
          <hr>
          声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。<br>
          © 2003-2015 ITeye.com.   All rights reserved.  [ 京ICP证110151号  京公网安备110105010620 ]
        </div>
      </div>
    </div>
    <script type="text/javascript">
  document.write("<img src='http://stat.iteye.com/?url="+ encodeURIComponent(document.location.href) + "&referrer=" + encodeURIComponent(document.referrer) + "&user_id=' width='0' height='0' />");
</script><img src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/a.gif" height="0" width="0">

<script src="Struts2_ValueStack,OGNL%E8%AF%A6%E8%A7%A3%20-%20%E8%80%81%E7%94%B7%E4%BA%BA%20-%20ITeye%E6%8A%80%E6%9C%AF%E7%BD%91%E7%AB%99_files/tracking.js" type="text/javascript"></script>

    
    
  

</body></html>